---
title: Basic Pentesting THM
date: 2023-05-21
categories: TryHackMe
tags:     # TAG names should always be lowercase
---


Hello guys today we will be doing the Basic Pentesting machine from TryHackMe.

## Enumeration

First do an nmap scan to identify open ports in the machine, there's a ssh, smb, http and http-proxy open for us.

```shell
┌──(root㉿kali)-[~]
└─# nmap -Pn -n --min-rate 2000 -sS --open -T5 -p- 10.10.9.104 -vvv  
Starting Nmap 7.93 ( https://nmap.org ) at 2023-05-23 18:23 EDT
Initiating SYN Stealth Scan at 18:23
Scanning 10.10.9.104 [65535 ports]
Discovered open port 80/tcp on 10.10.9.104
Discovered open port 445/tcp on 10.10.9.104
Discovered open port 139/tcp on 10.10.9.104
Discovered open port 22/tcp on 10.10.9.104
Discovered open port 8080/tcp on 10.10.9.104
Completed SYN Stealth Scan at 18:25, 98.48s elapsed (65535 total ports)
Nmap scan report for 10.10.9.104
Host is up, received user-set (3.2s latency).
Scanned at 2023-05-23 18:23:52 EDT for 99s
Not shown: 64962 filtered tcp ports (no-response), 568 closed tcp ports (reset)
Some closed ports may be reported as filtered due to --defeat-rst-ratelimit
PORT     STATE SERVICE      REASON
22/tcp   open  ssh          syn-ack ttl 61
80/tcp   open  http         syn-ack ttl 61
139/tcp  open  netbios-ssn  syn-ack ttl 61
445/tcp  open  microsoft-ds syn-ack ttl 61
8080/tcp open  http-proxy   syn-ack ttl 61

```
## Task 3

Going to port 80 shows a website saying in maintenance, so we do a little enumeration with gobuster dir

![](/assets/img/basicpen/1.png)
![](/assets/img/basicpen/2.png)

As you can see the task 3 answer for a hidden directory is /development

## Task 5

There are two files and we download them, dev.txt and j.txt from the discovered directory and seeing dev.txt reveals an outdated version of struts, which btw doesn't have any cve
so we don't go there. But in j.txt it seems that J has his ssh password vulnerable to brute forcing.

![](/assets/img/basicpen/dev.png)
![](/assets/img/basicpen/j.png)

After running enum4linux in the smb server we discover 2 usernames jan and kay and a file called staff.txt which proves the usernames discovered by enum4linux.

![](/assets/img/basicpen/staff.png)

## Task 6

After running hydra against ssh with username jan and the rockyou wordlist it appears to be that the password for ssh is "armando"

![](/assets/img/basicpen/hydrajan.png)

## Task 8

Connecting via ssh and going to the folder of kay we see a .ssh folder and inside they have an id_rsa file, download it with scp or whatever you want to our machine
and try to connect to kay with his key.

![](/assets/img/basicpen/gotaccess.png)

![](/assets/img/basicpen/passrequired.png)

It has a passsphrase so we use ssh2john to make the hash readable for john and cracking the hash, reveals the password to be "beeswax"

![](/assets/img/basicpen/johncrack2.png)

## Task 10

Finally connecting to kay ssh we see a file named pass.bak, open it and there is the final flag. After escalating privileges with the password inside go to root folder there's a message for us.

![](/assets/img/basicpen/lastmessage.png)

Thanks for Reading and hope you liked reading the writeup :D
